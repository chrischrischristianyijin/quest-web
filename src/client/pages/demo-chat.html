<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest AI Chat - Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/demo-chat.css">
</head>

<body>
    <div class="api-status" id="apiStatus" style="display: none;">
        🔄 Connecting to AI...
    </div>

    <div class="chat-container">
        <!-- 会话侧边栏 -->
        <div class="session-sidebar" id="sessionSidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <h3>Chat History</h3>
                </div>
                <div class="sidebar-actions">
                    <button class="close-btn" id="closeSidebarBtn" title="Close sidebar">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="memory-section">
                <div class="memory-indicator" id="memoryIndicator">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M9 12l2 2 4-4M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span id="memoryCount">0</span> memories
                </div>
            </div>
            <div class="sessions-list" id="sessionsList">
                <div class="loading-sessions">Loading...</div>
            </div>
            <div class="new-session-section">
                <button class="new-session-btn" id="newSessionBtn" title="Create new chat">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span>New Chat</span>
                </button>
            </div>
        </div>

        <!-- 主聊天区域 -->
        <div class="chat-main-container">
            <div class="chat-header">
                <button class="sidebar-toggle" id="sidebarToggle" title="Show/Hide chat history">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <div class="logo-container">
                    <img src="../public/logo.png" alt="Quest" class="logo" id="chatLogo" title="Back to Home">
                </div>
                <div class="header-actions">
                    <a href="/my-space" class="back-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        Back to My Space
                    </a>
                </div>
            </div>

            <div class="chat-main">
                <div class="chat-messages" id="chatMessages">
                    <div class="demo-notice">
                        <strong>✨ Welcome to Quest AI:</strong> I'm your intelligent companion, ready to explore your
                        personal knowledge collection and provide thoughtful insights tailored just for you.
                    </div>

                    <div class="message-container assistant">
                        <div class="message-avatar">
                            <img src="../public/Q.png" alt="Quest AI"
                                style="width: 80%; height: 80%; border-radius: 50%; object-fit: contain;"
                                class="ai-avatar-img">
                        </div>
                        <div class="message assistant">
                            Hi 👋 I'm Quest's AI assistant.<br>
                            I use your saved content to give smarter, context-based answers.<br>
                            Ask me about your notes, articles, or research, and I'll pull up what's most relevant for
                            you!
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <form class="chat-input-form" id="chatForm">
                        <textarea class="chat-input" id="chatInput"
                            placeholder="Ask me anything about your saved content..." autocomplete="off"
                            rows="1"></textarea>
                        <button type="submit" class="send-btn" id="sendBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            Send
                        </button>
                    </form>
                    <div class="testing-disclaimer">
                        Quest AI is in testing phase. Responses may contain errors. Please verify important information.
                    </div>
                </div>
            </div>
        </div>

        <!-- 记忆面板 -->
        <div class="memory-panel" id="memoryPanel">
            <div class="memory-panel-header">
                <h4>AI Memories</h4>
                <button class="close-memory-btn" id="closeMemoryBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
            <div class="memories-list" id="memoriesList">
                <div class="empty-memories">No memories</div>
            </div>
        </div>
    </div>

    <script type="module" src="../js/demo-chat.js"></script>
</body>

</html>